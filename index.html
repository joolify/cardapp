<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap-reboot.css" />
    <link rel="stylesheet" type="text/css" href="style.css" />
    <link href="https://fonts.googleapis.com/css?family=Josefin+Sans" rel="stylesheet">

</head>
<body>
    <div class="container">
        <section class="sidenav">
            <div class="btn-group">
                <button class="button" id="newGame">New game</button>
                <button class="button">Pause</button>
                <button class="button">Save</button>
            </div>
        </section>

        <main>
            <h1>The Ultimate Card Game!</h1>
            <header>
                <nav>
                    <ul>
                        <li><a href="#">Play!</a></li>
                        <li><a href="#">Saved games</a></li>
                    </ul>
                </nav>
                <section>
                    <time>00:00</time>
                    <div>Current score: <span id="score">0</span></div>
                </section>
            </header>

            <div class="row">
                <div class="column">
                    Deck:
                </div>
                <div class="column">
                    Player:
                </div>
                <div class="column">
                    Computer:
                </div>
                <div class="column">
                    Discard:
                </div>
            </div>
            <div class="row">
                <div class="column">
                    <img src="images/red_back.png" class="card" id="deckCard" />
                </div>
                <div class="column">
                    <img src="images/0C.png" class="card" id="playerCard" />
                </div>
                <div class="column">
                    <img src="images/5H.png" class="card" id="computerCard" />
                </div>
                <div class="column">
                    <img src="images/KC.png" class="card" id="discardCard" />
                </div>
            </div>
            <table class="scoreBoard">
                <thead>
                    <tr>
                        <td>
                            Name:
                        </td>
                        <td>
                            Date:
                        </td>
                        <td>
                            Score:
                        </td>
                        <td>
                            Total time:
                        </td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            Joel
                        </td>
                        <td>
                            <time>2018-11-12</time>
                        </td>
                        <td>
                            50
                        </td>
                        <td>
                            100
                        </td>
                    </tr>
                </tbody>
            </table>
        </main>
    </div>
    <script>
        document.getElementById("newGame").addEventListener("click", newGame);

        function newGame() {
            var deck = getDeck();

            var dealtCards = dealCards(deck);

            var playerCards = dealtCards.playerCards;
            var computerCards = dealtCards.computerCards;

            while (playerCards.length > 0) {
                var playerCard = draw(playerCards);
                var computerCard = draw(computerCards);
                console.log(playerCard);

                var score = match(playerCard, computerCard);
                document.getElementById('score').innerHTML = score;
            }

        }

        function draw(deck) {
            return deck.pop();
        }

        function match(card1, card2) {
            if (card1.slice(0, 1) === card2.slice(0, 1))
                return 1;
            if (card1.slice(1, 2) === card2.slice(1, 2))
                return 1;
            return -1;
        }
        function dealCards(deck) {
            var indexToSplit = deck.length / 2;
            var first = deck.slice(0, indexToSplit);
            var second = deck.slice(indexToSplit + 1);

            return { playerCards: first, computerCards: second };
        }

        function shuffle(deck) {
            for (var i = 0; i < 1000; i++) {
                var location1 = Math.floor((Math.random() * deck.length));
                var location2 = Math.floor((Math.random() * deck.length));
                var tmp = deck[location1];

                deck[location1] = deck[location2];
                deck[location2] = tmp;
            }
        }
        function getDeck() {
            var deck = new Array();
            var suits = ["S", "D", "C", "H"];
            var values = ["A", "2", "3", "4", "5", "6", "7", "8", "9", "0", "J", "Q", "K"];

            for (var i = 0; i < suits.length; i++) {
                for (var x = 0; x < values.length; x++) {
                    var card = values[x] + suits[i];
                    deck.push(card);
                }
            }

            shuffle(deck);

            return deck;
        }
    </script>
</body>
</html>